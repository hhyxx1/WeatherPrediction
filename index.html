<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒå¤©æ°”æ•°æ®åˆ†æä¸é¢„æµ‹ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- APIé…ç½®æ–‡ä»¶ -->
    <script src="weatherApiConfig.js"></script>
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
            min-height: 100vh;
        }
        
        .hero-bg {
            background-image: url('./resources/hero-weather.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .glass-effect {
            background: rgba(248, 250, 252, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .weather-card {
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        
        .weather-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .weather-icon {
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }
        
        .temperature-display {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
        }
        
        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            .weather-icon {
                font-size: 1.5rem;
            }
            
            .temperature-display {
                font-size: 1.25rem;
            }
            
            .hero-bg {
                background-attachment: scroll;
            }
            
            /* ç§»åŠ¨ç«¯å¯¼èˆªæ ä¼˜åŒ– */
            nav .max-w-7xl {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            /* ç§»åŠ¨ç«¯æœç´¢æ¡†ä¼˜åŒ– */
            #citySearch {
                width: 120px;
                padding: 0.5rem;
            }
            
            /* ç§»åŠ¨ç«¯å›¾è¡¨é«˜åº¦è°ƒæ•´ */
            #mainChart {
                height: 300px !important;
            }
            
            /* ç§»åŠ¨ç«¯å¡ç‰‡é—´è·è°ƒæ•´ */
            .weather-card {
                margin-bottom: 0.5rem;
            }
            
            /* ç§»åŠ¨ç«¯å­—ä½“å¤§å°è°ƒæ•´ */
            h1, h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.25rem;
            }
            
            /* ç§»åŠ¨ç«¯æŒ‰é’®å¤§å°è°ƒæ•´ */
            button {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
            
            /* ç§»åŠ¨ç«¯å›¾è¡¨æ§åˆ¶æ ä¼˜åŒ– */
            .glass-effect.rounded-2xl.p-4 {
                padding: 1rem;
            }
            
            /* ç§»åŠ¨ç«¯æ—¶é—´èŒƒå›´æŒ‰é’®ä¼˜åŒ– */
            .flex.space-x-2 button {
                padding: 0.25rem 0.5rem;
                font-size: 0.75rem;
            }
            
            /* ç§»åŠ¨ç«¯å›¾è¡¨ç±»å‹é€‰æ‹©å™¨ä¼˜åŒ– */
            select {
                padding: 0.5rem;
                font-size: 0.875rem;
            }
            
            /* ç§»åŠ¨ç«¯èœå•æ ·å¼ */
            #mobileMenu {
                background: rgba(248, 250, 252, 0.98);
                backdrop-filter: blur(15px);
            }
        }
        
        /* å°å±å¹•æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 480px) {
            .weather-icon {
                font-size: 1.25rem;
            }
            
            .temperature-display {
                font-size: 1rem;
            }
            
            /* å°å±å¹•å¯¼èˆªæ æ ‡é¢˜éšè— */
            nav h1 {
                font-size: 1.125rem;
            }
            
            /* å°å±å¹•æœç´¢æ¡†è¿›ä¸€æ­¥ç¼©å° */
            #citySearch {
                width: 100px;
                padding: 0.375rem;
            }
            
            /* å°å±å¹•å›¾è¡¨é«˜åº¦è¿›ä¸€æ­¥è°ƒæ•´ */
            #mainChart {
                height: 250px !important;
            }
            
            /* å°å±å¹•ç½‘æ ¼å¸ƒå±€è°ƒæ•´ */
            .grid.grid-cols-2.md\\:grid-cols-4 {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
            
            /* å°å±å¹•è¯¦æƒ…æŒ‡æ ‡ä¼˜åŒ– */
            .text-center .text-2xl {
                font-size: 1.5rem;
            }
            
            .text-center .font-semibold {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="overflow-x-hidden">
    <!-- æµ®åŠ¨ç²’å­èƒŒæ™¯ -->
    <div class="floating-particles">
        <div class="particle w-2 h-2" style="left: 10%; animation-delay: 0s;"></div>
        <div class="particle w-3 h-3" style="left: 20%; animation-delay: 1s;"></div>
        <div class="particle w-1 h-1" style="left: 30%; animation-delay: 2s;"></div>
        <div class="particle w-2 h-2" style="left: 40%; animation-delay: 3s;"></div>
        <div class="particle w-3 h-3" style="left: 50%; animation-delay: 4s;"></div>
        <div class="particle w-1 h-1" style="left: 60%; animation-delay: 5s;"></div>
        <div class="particle w-2 h-2" style="left: 70%; animation-delay: 0.5s;"></div>
        <div class="particle w-3 h-3" style="left: 80%; animation-delay: 1.5s;"></div>
        <div class="particle w-1 h-1" style="left: 90%; animation-delay: 2.5s;"></div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <nav class="glass-effect fixed top-0 left-0 right-0 z-50 px-4 py-3">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="weather-icon">ğŸŒ¤ï¸</div>
                <h1 class="text-lg md:text-2xl font-bold text-slate-800" style="font-family: 'Noto Serif SC', serif;">
                    å…¨çƒå¤©æ°”æ•°æ®åˆ†æç³»ç»Ÿ
                </h1>
            </div>
            
            <div class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-blue-600 font-medium">
                    å®æ—¶ç›‘æ§
                </a>
                <a href="analysis.html" class="text-slate-700 hover:text-blue-600 font-medium transition-colors">
                    æ·±åº¦åˆ†æ
                </a>
                <a href="about.html" class="text-slate-700 hover:text-blue-600 font-medium transition-colors">
                    å…³äºç³»ç»Ÿ
                </a>
            </div>
            
            <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
            <div class="md:hidden">
                <button onclick="toggleMobileMenu()" class="text-slate-700 hover:text-blue-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            
            <div class="hidden md:flex items-center space-x-4">
                <div class="relative">
                    <input 
                        type="text" 
                        id="citySearch"
                        placeholder="æœç´¢åŸå¸‚..." 
                        class="px-3 py-2 text-sm rounded-lg border border-slate-300 focus:border-blue-500 focus:outline-none bg-white/80 backdrop-blur-sm w-32 lg:w-auto"
                    >
                    <button onclick="addCity()" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-500 hover:text-blue-700 text-sm">
                        â•
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ç§»åŠ¨ç«¯èœå• -->
        <div id="mobileMenu" class="hidden md:hidden mt-4 pb-4 border-t border-slate-200">
            <div class="flex flex-col space-y-3 pt-4">
                <a href="index.html" class="text-blue-600 font-medium px-2">
                    å®æ—¶ç›‘æ§
                </a>
                <a href="analysis.html" class="text-slate-700 hover:text-blue-600 font-medium transition-colors px-2">
                    æ·±åº¦åˆ†æ
                </a>
                <a href="about.html" class="text-slate-700 hover:text-blue-600 font-medium transition-colors px-2">
                    å…³äºç³»ç»Ÿ
                </a>
                <div class="relative px-2">
                    <input 
                        type="text" 
                        id="mobileCitySearch"
                        placeholder="æœç´¢åŸå¸‚..." 
                        class="w-full px-3 py-2 text-sm rounded-lg border border-slate-300 focus:border-blue-500 focus:outline-none bg-white/80 backdrop-blur-sm"
                    >
                    <button onclick="addCityMobile()" class="absolute right-5 top-1/2 transform -translate-y-1/2 text-blue-500 hover:text-blue-700 text-sm">
                        â•
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="pt-20 px-4 pb-12">
        <!-- é€‰ä¸­åŸå¸‚ä¿¡æ¯å¡ç‰‡ -->
        <div class="max-w-7xl mx-auto mb-8">
            <div class="glass-effect rounded-2xl p-6 text-center">
                <h2 id="selectedCityName" class="text-3xl font-bold text-slate-800 mb-2">ä½ç½®</h2>
                <p id="selectedCityTime" class="text-slate-600 mb-4">----å¹´--æœˆ--æ—¥ --:--</p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                    <div class="weather-icon" id="selectedCityWeatherIcon">--</div>
                    <div class="temperature-display text-5xl text-slate-800" id="selectedCityTemp">--Â°C</div>
                    <div class="text-xl text-slate-700" id="selectedCityWeather">--</div>
                </div>
            </div>
        </div>

        <!-- åŸå¸‚åˆ—è¡¨ -->
        <div class="max-w-7xl mx-auto mb-8">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-semibold text-white">çƒ­é—¨åŸå¸‚</h3>
                <button onclick="refreshAllData()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors">
                    ğŸ”„ åˆ·æ–°æ•°æ®
                </button>
            </div>
            <div id="popularCities" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <!-- çƒ­é—¨åŸå¸‚å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- è¯¦ç»†æŒ‡æ ‡ -->
        <div class="max-w-7xl mx-auto mb-8">
            <h3 class="text-xl font-semibold text-white mb-4">è¯¦ç»†æŒ‡æ ‡</h3>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <div class="glass-effect rounded-xl p-4 text-center">
                    <p class="text-slate-600 text-sm">æ¹¿åº¦</p>
                    <p id="humidity" class="text-2xl font-semibold text-slate-800">--%</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center">
                    <p class="text-slate-600 text-sm">é£é€Ÿ</p>
                    <p id="windSpeed" class="text-2xl font-semibold text-slate-800">-- km/h</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center">
                    <p class="text-slate-600 text-sm">æ°”å‹</p>
                    <p id="pressure" class="text-2xl font-semibold text-slate-800">-- hPa</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center">
                    <p class="text-slate-600 text-sm">èƒ½è§åº¦</p>
                    <p id="visibility" class="text-2xl font-semibold text-slate-800">-- km</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center">
                    <p class="text-slate-600 text-sm">ç©ºæ°”è´¨é‡</p>
                    <p id="aqi" class="text-2xl font-semibold text-slate-800">--</p>
                </div>
            </div>
        </div>

        <!-- å›¾è¡¨æ§åˆ¶ -->
        <div class="max-w-7xl mx-auto mb-4">
            <div class="glass-effect rounded-2xl p-4">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                    <div>
                        <label for="chartType" class="block text-slate-700 mb-2">å›¾è¡¨ç±»å‹ï¼š</label>
                        <select id="chartType" class="px-4 py-2 rounded-lg border border-slate-300 focus:border-blue-500 focus:outline-none">
                            <option value="temperature">æ¸©åº¦è¶‹åŠ¿</option>
                            <option value="humidity">æ¹¿åº¦å˜åŒ–</option>
                            <option value="pressure">æ°”å‹å˜åŒ–</option>
                            <option value="windSpeed">é£é€Ÿå˜åŒ–</option>
                            <option value="precipitation">é™æ°´é‡</option>
                        </select>
                    </div>
                    <div>
                        <p class="text-slate-700 mb-2">æ—¶é—´èŒƒå›´ï¼š</p>
                        <div class="flex space-x-2">
                            <button id="btn-time-range-24h" onclick="updateTimeRangeButtons('24h'); window.WeatherApp.setTimeRange('24h')" class="px-3 py-1 rounded-lg bg-blue-500 text-white text-sm">24å°æ—¶</button>
                            <button id="btn-time-range-7d" onclick="updateTimeRangeButtons('7d'); window.WeatherApp.setTimeRange('7d')" class="px-3 py-1 rounded-lg bg-slate-300 text-slate-700 text-sm">7å¤©</button>
                            <button id="btn-time-range-30d" onclick="updateTimeRangeButtons('30d'); window.WeatherApp.setTimeRange('30d')" class="px-3 py-1 rounded-lg bg-slate-300 text-slate-700 text-sm">30å¤©</button>
                        </div>
                        <script>
                        function updateTimeRangeButtons(selectedRange) {
                            // é‡ç½®æ‰€æœ‰æŒ‰é’®æ ·å¼
                            document.getElementById('btn-time-range-24h').className = 'px-3 py-1 rounded-lg bg-slate-300 text-slate-700 text-sm';
                            document.getElementById('btn-time-range-7d').className = 'px-3 py-1 rounded-lg bg-slate-300 text-slate-700 text-sm';
                            document.getElementById('btn-time-range-30d').className = 'px-3 py-1 rounded-lg bg-slate-300 text-slate-700 text-sm';
                            
                            // è®¾ç½®é€‰ä¸­æŒ‰é’®æ ·å¼
                            if (selectedRange === '24h') {
                                document.getElementById('btn-time-range-24h').className = 'px-3 py-1 rounded-lg bg-blue-500 text-white text-sm';
                            } else if (selectedRange === '7d') {
                                document.getElementById('btn-time-range-7d').className = 'px-3 py-1 rounded-lg bg-blue-500 text-white text-sm';
                            } else if (selectedRange === '30d') {
                                document.getElementById('btn-time-range-30d').className = 'px-3 py-1 rounded-lg bg-blue-500 text-white text-sm';
                            }
                        }
                        </script>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="exportData()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                            ğŸ“Š å¯¼å‡ºæ•°æ®
                        </button>
                        <button onclick="showAlerts()" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors">
                            âš ï¸ å¤©æ°”é¢„è­¦
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å›¾è¡¨å®¹å™¨ -->
        <div class="max-w-7xl mx-auto">
            <div class="chart-container rounded-2xl p-4">
                <div id="mainChart" class="w-full h-96"></div>
            </div>
        </div>
    </main>

    <!-- JavaScript å¼•å…¥ -->
    <script src="main.js"></script>